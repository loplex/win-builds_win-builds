include ../Makefile.data

FILES = index support documentation download news comparison

temp/screenshot.png: temp screenshot-windows.png
	pngnq -L < screenshot-windows.png > temp/screenshot.png

all web: temp $(patsubst %,temp/%.html,$(FILES)) temp/screenshot.png

temp:
	mkdir -p temp

temp/%.html: temp footer.html header.html head.php %.php style.css ../Makefile.data
	php "$*.php" \
	  | sed 's/@@VERSION@@/$(VERSION)/g' \
	  > "$@"

web-upload upload: web
	rsync -avzLP "temp/" "$(WEB)/"

.PHONY: upload
